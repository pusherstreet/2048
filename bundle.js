!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);r(5);new class{constructor(t){this.containerHtml=t,this.drawTable(),this.colorDictionary=this.getColorDictionary(),this.init(),document.onkeydown=(t=>{this.move(t.keyCode)})}init(){this.initArray(),this.wasShift=!0,this.fillTable()}initArray(){this.array=[];for(let t=0;t<4;t++){let t=[];for(let e=0;e<4;e++)t.push(0);this.array.push(t)}}drawTable(){if(this.containerHtml){let t=document.createElement("table");t.classList.add("board"),t.style.border="1px solid black";for(let e=0;e<4;e++){let e=document.createElement("tr");for(let t=0;t<4;t++){let t=document.createElement("td");t.style.textAlign="center",t.style.verticalAlign="middle",t.style.height="100px",t.style.width="100px",t.style.fontSize="22px",e.appendChild(t)}t.appendChild(e)}this.containerHtml.appendChild(t),this.table=t}}fillTable(){let t=this.getOpenPositions();if(!t.length&&this.isDeadlock()){let t=this.array.reduce((t,e)=>{let r=e.reduce((t,e)=>t<e?e:t,0);return r>t?r:t},0);alert("Your score is "+t),this.init()}else{this.wasShift&&this.generateNumber(t);for(let t=0;t<4;t++){let e=this.table.querySelectorAll("tr")[t];for(let r=0;r<4;r++){let n=e.querySelectorAll("td")[r],i=this.array[t][r];n.style.backgroundColor=0!=i?this.colorDictionary[Math.log2(i)-1]:"rgb(255, 255, 255)",n.innerText=i||""}}}}move(t){switch([37,38,39,40].includes(t)&&(this.wasShift=!1),t){case 37:for(let t=0;t<4;t++){let e=this.array[t];this.array[t]=this.shift(this.sum(e,"L"),"L")}this.fillTable();break;case 38:for(let t=0;t<4;t++){let e=[];for(let r=0;r<4;r++)e.push(this.array[r][t]);e=this.shift(this.sum(e,"L"),"L");for(let r=0;r<4;r++)this.array[r][t]=e[r]}this.fillTable();break;case 39:for(let t=0;t<4;t++){let e=this.array[t];this.array[t]=this.shift(this.sum(e,"R"),"R")}this.fillTable();break;case 40:for(let t=0;t<4;t++){let e=[];for(let r=0;r<4;r++)e.push(this.array[r][t]);e=this.shift(this.sum(e,"R"),"R");for(let r=0;r<4;r++)this.array[r][t]=e[r]}this.fillTable()}}sum(t,e){switch(e){case"L":for(var r=0;r<4;){if(t[r]){let e=r+1;for(;e<4;){if(t[e]){t[r]==t[e]&&(t[r]*=2,t[e]=0);break}e++}}r++}break;case"R":for(r=3;r>0;){if(t[r]){let e=r-1;for(;e>=0;){if(t[e]){t[r]==t[e]&&(t[r]*=2,t[e]=0);break}e--}}r--}}return t}shift(t,e){switch(e){case"R":t=t.sort((t,e)=>(!e&&t&&(this.wasShift=!0),!e&&t?1:0));break;case"L":t=t.sort((t,e)=>(!t&&e&&(this.wasShift=!0),!t&&e?1:0))}return t}generateNumber(t){if(t.length){let e=Math.random()>.5?2:4,r=Math.floor(Math.random()*t.length),n=t[r][0],i=t[r][1];this.array[n][i]=e}}getOpenPositions(){let t=[];for(let e=0;e<4;e++)for(let r=0;r<4;r++)this.array[e][r]||t.push([e,r]);return t}isDeadlock(){for(let t=0;t<4;t++)for(let e=0;e<4;e++){if(3!=e&&this.array[t][e]===this.array[t][e+1])return!1;if(3!=t&&this.array[t][e]==this.array[t+1][e])return!1}return!0}getColorDictionary(){let t=105,e=[];for(let r=0;r<30;r++){let n=20*r;if(n>450)e.push("rgb(255, 255, 255)");else if(n<=150){let r=`rgb(${t+n}, 105, 105)`;e.push(r)}else if(n>150&&n<=300){let r=`rgb(105, ${t+(n-=150)}, 105)`;e.push(r)}else n-=300}return e}}(document.getElementById("root"))},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,n=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?r+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,r){var n,i,o={},s=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=n.apply(this,arguments)),i}),a=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var r=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),l=null,f=0,c=[],u=r(1);function h(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=o[n.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](n.parts[s]);for(;s<n.parts.length;s++)i.parts.push(v(n.parts[s],e))}else{var a=[];for(s=0;s<n.parts.length;s++)a.push(v(n.parts[s],e));o[n.id]={id:n.id,refs:1,parts:a}}}}function p(t,e){for(var r=[],n={},i=0;i<t.length;i++){var o=t[i],s=e.base?o[0]+e.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};n[s]?n[s].parts.push(a):r.push(n[s]={id:s,parts:[a]})}return r}function d(t,e){var r=a(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=c[c.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),c.push(e);else if("bottom"===t.insertAt)r.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(t.insertInto+" "+t.insertAt.before);r.insertBefore(e,i)}}function b(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=c.indexOf(t);e>=0&&c.splice(e,1)}function y(t){var e=document.createElement("style");return t.attrs.type="text/css",m(e,t.attrs),d(t,e),e}function m(t,e){Object.keys(e).forEach(function(r){t.setAttribute(r,e[r])})}function v(t,e){var r,n,i,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var s=f++;r=l||(l=y(e)),n=x.bind(null,r,s,!1),i=x.bind(null,r,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",m(e,t.attrs),d(t,e),e}(e),n=function(t,e,r){var n=r.css,i=r.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(n=u(n));i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,r,e),i=function(){b(r),r.href&&URL.revokeObjectURL(r.href)}):(r=y(e),n=function(t,e){var r=e.css,n=e.media;n&&t.setAttribute("media",n);if(t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,r),i=function(){b(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var r=p(t,e);return h(r,e),function(t){for(var n=[],i=0;i<r.length;i++){var s=r[i];(a=o[s.id]).refs--,n.push(a)}t&&h(p(t,e),e);for(i=0;i<n.length;i++){var a;if(0===(a=n[i]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete o[a.id]}}}};var g,w=(g=[],function(t,e){return g[t]=e,g.filter(Boolean).join("\n")});function x(t,e,r,n){var i=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=w(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var i=(s=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),o=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[r].concat(o).concat([i]).join("\n")}var s;return[r].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r}).join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<t.length;i++){var s=t[i];"number"==typeof s[0]&&n[s[0]]||(r&&!s[2]?s[2]=r:r&&(s[2]="("+s[2]+") and ("+r+")"),e.push(s))}},e}},function(t,e,r){(t.exports=r(3)(!1)).push([t.i,".board tr td{\r\n    border: 1px solid black;\r\n}\r\n.board{\r\n    border-collapse: collapse;\r\n}",""])},function(t,e,r){var n=r(4);"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(2)(n,i);n.locals&&(t.exports=n.locals)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9Cb2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi91cmxzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2JvYXJkLmNzcyIsIndlYnBhY2s6Ly8vLi9zcmMvYm9hcmQuY3NzPzQ4MTYiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIltvYmplY3QgT2JqZWN0XSIsImh0bWxFbGVtZW50IiwidGhpcyIsImNvbnRhaW5lckh0bWwiLCJkcmF3VGFibGUiLCJjb2xvckRpY3Rpb25hcnkiLCJnZXRDb2xvckRpY3Rpb25hcnkiLCJpbml0IiwiZG9jdW1lbnQiLCJvbmtleWRvd24iLCJlIiwibW92ZSIsImtleUNvZGUiLCJpbml0QXJyYXkiLCJ3YXNTaGlmdCIsImZpbGxUYWJsZSIsImFycmF5Iiwicm93IiwiY29sIiwicHVzaCIsInRhYmxlIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInN0eWxlIiwiYm9yZGVyIiwidHIiLCJ0ZCIsInRleHRBbGlnbiIsInZlcnRpY2FsQWxpZ24iLCJoZWlnaHQiLCJ3aWR0aCIsImZvbnRTaXplIiwiYXBwZW5kQ2hpbGQiLCJvcGVuIiwiZ2V0T3BlblBvc2l0aW9ucyIsImxlbmd0aCIsImlzRGVhZGxvY2siLCJzY29yZSIsInJlZHVjZSIsInByZXYiLCJjdXJyZW50IiwibWF4IiwiaW5wcmV2IiwiaW5jdXJyZW50IiwiYWxlcnQiLCJnZW5lcmF0ZU51bWJlciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJiYWNrZ3JvdW5kQ29sb3IiLCJNYXRoIiwibG9nMiIsImlubmVyVGV4dCIsImRpcmVjdGlvbiIsImluY2x1ZGVzIiwiYXJyIiwic2hpZnQiLCJzdW0iLCJkaXIiLCJuZXh0Iiwic29ydCIsImEiLCJiIiwicG9zaXRpb25zIiwibnVtYmVyIiwicmFuZG9tIiwicG9zaXRpb24iLCJmbG9vciIsImRpY3Rpb25hcnkiLCJkaWZmIiwiY29sb3IiLCJnZXRFbGVtZW50QnlJZCIsImNzcyIsImxvY2F0aW9uIiwid2luZG93IiwiRXJyb3IiLCJiYXNlVXJsIiwicHJvdG9jb2wiLCJob3N0IiwiY3VycmVudERpciIsInBhdGhuYW1lIiwicmVwbGFjZSIsImZ1bGxNYXRjaCIsIm9yaWdVcmwiLCJuZXdVcmwiLCJ1bnF1b3RlZE9yaWdVcmwiLCJ0cmltIiwiJDEiLCJ0ZXN0IiwiaW5kZXhPZiIsIkpTT04iLCJzdHJpbmdpZnkiLCJmbiIsIm1lbW8iLCJzdHlsZXNJbkRvbSIsImlzT2xkSUUiLCJhbGwiLCJhdG9iIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJnZXRFbGVtZW50IiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInN0eWxlc0luc2VydGVkQXRUb3AiLCJmaXhVcmxzIiwiYWRkU3R5bGVzVG9Eb20iLCJzdHlsZXMiLCJvcHRpb25zIiwiaXRlbSIsImRvbVN0eWxlIiwiaWQiLCJyZWZzIiwiaiIsInBhcnRzIiwiYWRkU3R5bGUiLCJsaXN0VG9TdHlsZXMiLCJsaXN0IiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJtZWRpYSIsInNvdXJjZU1hcCIsImluc2VydFN0eWxlRWxlbWVudCIsImluc2VydEludG8iLCJsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCIsImluc2VydEF0IiwibmV4dFNpYmxpbmciLCJpbnNlcnRCZWZvcmUiLCJmaXJzdENoaWxkIiwiYmVmb3JlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiaWR4Iiwic3BsaWNlIiwiY3JlYXRlU3R5bGVFbGVtZW50IiwiYXR0cnMiLCJ0eXBlIiwiYWRkQXR0cnMiLCJlbCIsImtleXMiLCJmb3JFYWNoIiwia2V5Iiwic2V0QXR0cmlidXRlIiwib2JqIiwidXBkYXRlIiwicmVtb3ZlIiwicmVzdWx0IiwidHJhbnNmb3JtIiwic3R5bGVJbmRleCIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJiaW5kIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwicmV2b2tlT2JqZWN0VVJMIiwiQmxvYiIsImJ0b2EiLCJsaW5rIiwicmVsIiwiY3JlYXRlTGlua0VsZW1lbnQiLCJhdXRvRml4VXJscyIsInVuZGVmaW5lZCIsImNvbnZlcnRUb0Fic29sdXRlVXJscyIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiYmxvYiIsIm9sZFNyYyIsImhyZWYiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNyZWF0ZVRleHROb2RlIiwibmV3T2JqIiwiREVCVUciLCJuZXdMaXN0IiwibWF5UmVtb3ZlIiwidGV4dFN0b3JlIiwicmVwbGFjZVRleHQiLCJpbmRleCIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiQm9vbGVhbiIsImpvaW4iLCJjc3NOb2RlIiwiY2hpbGROb2RlcyIsInVzZVNvdXJjZU1hcCIsInRvU3RyaW5nIiwibWFwIiwiY29udGVudCIsImNzc01hcHBpbmciLCJzb3VyY2VNYXBwaW5nIiwic291cmNlVVJMcyIsInNvdXJjZXMiLCJzb3VyY2UiLCJzb3VyY2VSb290IiwiY29uY2F0IiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiaG1yIiwibG9jYWxzIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFaLEVBQUFtQixFQUFBLFNBQUFqQixHQUNBWSxPQUFBQyxlQUFBYixFQUFBLGNBQWlEa0IsT0FBQSxLQUlqRHBCLEVBQUFxQixFQUFBLFNBQUFsQixHQUNBLElBQUFTLEVBQUFULEtBQUFtQixXQUNBLFdBQTJCLE9BQUFuQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBVSxFQUFBQyxHQUFzRCxPQUFBVixPQUFBVyxVQUFBQyxlQUFBbkIsS0FBQWdCLEVBQUFDLElBR3REeEIsRUFBQTJCLEVBQUEsR0FJQTNCLElBQUE0QixFQUFBLDhDQ2pFQSxVQ0NBQyxZQUFBQyxHQUNBQyxLQUFBQyxjQUFBRixFQUNBQyxLQUFBRSxZQUNBRixLQUFBRyxnQkFBQUgsS0FBQUkscUJBQ0FKLEtBQUFLLE9BQ0FDLFNBQUFDLFVBQUEsQ0FBQUMsSUFDQVIsS0FBQVMsS0FBQUQsRUFBQUUsV0FJQVosT0FDQUUsS0FBQVcsWUFDQVgsS0FBQVksVUFBQSxFQUNBWixLQUFBYSxZQUdBZixZQUNBRSxLQUFBYyxTQUNBLFFBQUFDLEVBQUEsRUFBeUJBLEVBQUEsRUFBU0EsSUFBQSxDQUNsQyxJQUFBQSxLQUNBLFFBQUFDLEVBQUEsRUFBNkJBLEVBQUEsRUFBU0EsSUFDdENELEVBQUFFLEtBQUEsR0FFQWpCLEtBQUFjLE1BQUFHLEtBQUFGLElBR0FqQixZQUNBLEdBQUFFLEtBQUFDLGNBQUEsQ0FDQSxJQUFBaUIsRUFBQVosU0FBQWEsY0FBQSxTQUNBRCxFQUFBRSxVQUFBQyxJQUFBLFNBQ0FILEVBQUFJLE1BQUFDLE9BQUEsa0JBQ0EsUUFBQVIsRUFBQSxFQUE2QkEsRUFBQSxFQUFTQSxJQUFBLENBQ3RDLElBQUFTLEVBQUFsQixTQUFBYSxjQUFBLE1BQ0EsUUFBQUgsRUFBQSxFQUFpQ0EsRUFBQSxFQUFTQSxJQUFBLENBQzFDLElBQUFTLEVBQUFuQixTQUFBYSxjQUFBLE1BQ0FNLEVBQUFILE1BQUFJLFVBQUEsU0FDQUQsRUFBQUgsTUFBQUssY0FBQSxTQUNBRixFQUFBSCxNQUFBTSxPQUFBLFFBQ0FILEVBQUFILE1BQUFPLE1BQUEsUUFDQUosRUFBQUgsTUFBQVEsU0FBQSxPQUNBTixFQUFBTyxZQUFBTixHQUVBUCxFQUFBYSxZQUFBUCxHQUVBeEIsS0FBQUMsY0FBQThCLFlBQUFiLEdBQ0FsQixLQUFBa0IsU0FJQXBCLFlBQ0EsSUFBQWtDLEVBQUFoQyxLQUFBaUMsbUJBQ0EsSUFBQUQsRUFBQUUsUUFBQWxDLEtBQUFtQyxhQUFBLENBQ0EsSUFBQUMsRUFBQXBDLEtBQUFjLE1BQUF1QixPQUFBLENBQUFDLEVBQUFDLEtBQThELElBQUFDLEVBQUFELEVBQUFGLE9BQUEsQ0FBQUksRUFBQUMsSUFBQUQsRUFBQUMsSUFBQUQsRUFBQSxHQUE0RixPQUFBRCxFQUFBRixFQUFBRSxFQUFBRixHQUFnQyxHQUMxTEssTUFBQSxpQkFBQVAsR0FDQXBDLEtBQUFLLFdBQ1MsQ0FDVEwsS0FBQVksVUFDQVosS0FBQTRDLGVBQUFaLEdBRUEsUUFBQWpCLEVBQUEsRUFBNkJBLEVBQUEsRUFBU0EsSUFBQSxDQUN0QyxJQUFBUyxFQUFBeEIsS0FBQWtCLE1BQUEyQixpQkFBQSxNQUFBOUIsR0FDQSxRQUFBQyxFQUFBLEVBQWlDQSxFQUFBLEVBQVNBLElBQUEsQ0FDMUMsSUFBQVMsRUFBQUQsRUFBQXFCLGlCQUFBLE1BQUE3QixHQUNBM0IsRUFBQVcsS0FBQWMsTUFBQUMsR0FBQUMsR0FDQVMsRUFBQUgsTUFBQXdCLGdCQUFBLEdBQUF6RCxFQUFBVyxLQUFBRyxnQkFBQTRDLEtBQUFDLEtBQUEzRCxHQUFBLHdCQUNBb0MsRUFBQXdCLFVBQUE1RCxHQUFBLE1BS0FTLEtBQUFvRCxHQUlBLFFBSEEsYUFBQUMsU0FBQUQsS0FDQWxELEtBQUFZLFVBQUEsR0FFQXNDLEdBQ0EsUUFDQSxRQUFBbkMsRUFBQSxFQUFpQ0EsRUFBQSxFQUFTQSxJQUFBLENBQzFDLElBQUFxQyxFQUFBcEQsS0FBQWMsTUFBQUMsR0FDQWYsS0FBQWMsTUFBQUMsR0FBQWYsS0FBQXFELE1BQUFyRCxLQUFBc0QsSUFBQUYsRUFBQSxVQUVBcEQsS0FBQWEsWUFDQSxNQUNBLFFBQ0EsUUFBQUcsRUFBQSxFQUFnQ0EsRUFBQSxFQUFTQSxJQUFBLENBQ3pDLElBQUFvQyxLQUNBLFFBQUFyQyxFQUFBLEVBQW9DQSxFQUFBLEVBQVNBLElBQzdDcUMsRUFBQW5DLEtBQUFqQixLQUFBYyxNQUFBQyxHQUFBQyxJQUVBb0MsRUFBQXBELEtBQUFxRCxNQUFBckQsS0FBQXNELElBQUFGLEVBQUEsVUFDQSxRQUFBckMsRUFBQSxFQUFvQ0EsRUFBQSxFQUFTQSxJQUM3Q2YsS0FBQWMsTUFBQUMsR0FBQUMsR0FBQW9DLEVBQUFyQyxHQUdBZixLQUFBYSxZQUNBLE1BQ0EsUUFDQSxRQUFBRSxFQUFBLEVBQWlDQSxFQUFBLEVBQVNBLElBQUEsQ0FDMUMsSUFBQXFDLEVBQUFwRCxLQUFBYyxNQUFBQyxHQUNBZixLQUFBYyxNQUFBQyxHQUFBZixLQUFBcUQsTUFBQXJELEtBQUFzRCxJQUFBRixFQUFBLFVBRUFwRCxLQUFBYSxZQUNBLE1BQ0EsUUFDQSxRQUFBRyxFQUFBLEVBQWdDQSxFQUFBLEVBQVNBLElBQUEsQ0FDekMsSUFBQW9DLEtBQ0EsUUFBQXJDLEVBQUEsRUFBb0NBLEVBQUEsRUFBU0EsSUFDN0NxQyxFQUFBbkMsS0FBQWpCLEtBQUFjLE1BQUFDLEdBQUFDLElBRUFvQyxFQUFBcEQsS0FBQXFELE1BQUFyRCxLQUFBc0QsSUFBQUYsRUFBQSxVQUNBLFFBQUFyQyxFQUFBLEVBQW9DQSxFQUFBLEVBQVNBLElBQzdDZixLQUFBYyxNQUFBQyxHQUFBQyxHQUFBb0MsRUFBQXJDLEdBR0FmLEtBQUFhLGFBSUFmLElBQUFzRCxFQUFBRyxHQUNBLE9BQUFBLEdBQ0EsUUFFQSxJQURBLElBQUF2QyxFQUFBLEVBQ0FBLEVBQUEsSUFDQSxHQUFBb0MsRUFBQXBDLEdBQUEsQ0FDQSxJQUFBd0MsRUFBQXhDLEVBQUEsRUFDQSxLQUFBd0MsRUFBQSxJQUNBLEdBQUFKLEVBQUFJLEdBQUEsQ0FDQUosRUFBQXBDLElBQUFvQyxFQUFBSSxLQUNBSixFQUFBcEMsSUFBQSxFQUNBb0MsRUFBQUksR0FBQSxHQUVBLE1BRUFBLEtBR0F4QyxJQUVBLE1BQ0EsUUFFQSxJQURBQSxFQUFBLEVBQ0FBLEVBQUEsSUFDQSxHQUFBb0MsRUFBQXBDLEdBQUEsQ0FDQSxJQUFBd0MsRUFBQXhDLEVBQUEsRUFDQSxLQUFBd0MsR0FBQSxJQUNBLEdBQUFKLEVBQUFJLEdBQUEsQ0FDQUosRUFBQXBDLElBQUFvQyxFQUFBSSxLQUNBSixFQUFBcEMsSUFBQSxFQUNBb0MsRUFBQUksR0FBQSxHQUVBLE1BRUFBLEtBR0F4QyxLQUtBLE9BQUFvQyxFQUVBdEQsTUFBQXNELEVBQUFHLEdBQ0EsT0FBQUEsR0FDQSxRQUNBSCxJQUFBSyxLQUFBLENBQUFDLEVBQUFDLE1BQ0FBLEdBQUFELElBQ0ExRCxLQUFBWSxVQUFBLElBRUErQyxHQUFBRCxFQUFBLE1BRUEsTUFDQSxRQUNBTixJQUFBSyxLQUFBLENBQUFDLEVBQUFDLE1BQ0FELEdBQUFDLElBQ0EzRCxLQUFBWSxVQUFBLElBRUE4QyxHQUFBQyxFQUFBLE1BSUEsT0FBQVAsRUFFQXRELGVBQUE4RCxHQUNBLEdBQUFBLEVBQUExQixPQUFBLENBQ0EsSUFBQTJCLEVBQUFkLEtBQUFlLFNBQUEsT0FDQUMsRUFBQWhCLEtBQUFpQixNQUFBakIsS0FBQWUsU0FBQUYsRUFBQTFCLFFBQ0FuQixFQUFBNkMsRUFBQUcsR0FBQSxHQUNBL0MsRUFBQTRDLEVBQUFHLEdBQUEsR0FDQS9ELEtBQUFjLE1BQUFDLEdBQUFDLEdBQUE2QyxHQUdBL0QsbUJBQ0EsSUFBQThELEtBQ0EsUUFBQTdDLEVBQUEsRUFBd0JBLEVBQUEsRUFBU0EsSUFDakMsUUFBQUMsRUFBQSxFQUE0QkEsRUFBQSxFQUFTQSxJQUNyQ2hCLEtBQUFjLE1BQUFDLEdBQUFDLElBQ0E0QyxFQUFBM0MsTUFBQUYsRUFBQUMsSUFJQSxPQUFBNEMsRUFFQTlELGFBQ0EsUUFBQWlCLEVBQUEsRUFBd0JBLEVBQUEsRUFBU0EsSUFDakMsUUFBQUMsRUFBQSxFQUE0QkEsRUFBQSxFQUFTQSxJQUFBLENBQ3JDLE1BQUFBLEdBQUFoQixLQUFBYyxNQUFBQyxHQUFBQyxLQUFBaEIsS0FBQWMsTUFBQUMsR0FBQUMsRUFBQSxHQUNBLFNBRUEsTUFBQUQsR0FBQWYsS0FBQWMsTUFBQUMsR0FBQUMsSUFBQWhCLEtBQUFjLE1BQUFDLEVBQUEsR0FBQUMsR0FDQSxTQUlBLFNBRUFsQixxQkFDQSxJQUFBVixFQUFBLElBRUE2RSxLQUNBLFFBQUEzRSxFQUFBLEVBQXNCQSxFQUFBLEdBQVFBLElBQUEsQ0FDOUIsSUFBQUQsRUFKb0IsR0FJcEJDLEVBQ0EsR0FBQUQsRUFBQTZFLElBQ0FELEVBQUFoRCxLQUFBLDJCQUNhLEdBQUE1QixHQU5iLElBTWEsQ0FDYixJQUFBOEUsU0FBbUMvRSxFQUFBQyxlQUNuQzRFLEVBQUFoRCxLQUFBa0QsUUFDYSxHQUFBOUUsRUFUYixLQVNhQSxHQUFBNkUsSUFBQSxDQUViLElBQUFDLGNBQXlDL0UsR0FEekNDLEdBVkEsYUFZQTRFLEVBQUFoRCxLQUFBa0QsUUFFQTlFLEdBQUEsSUFJQSxPQUFBNEUsSUQ1T0EzRCxTQUFBOEQsZUFBQSx3QkVZQWhHLEVBQUFELFFBQUEsU0FBQWtHLEdBRUEsSUFBQUMsRUFBQSxvQkFBQUMsZUFBQUQsU0FFQSxJQUFBQSxFQUNBLFVBQUFFLE1BQUEsb0NBSUEsSUFBQUgsR0FBQSxpQkFBQUEsRUFDQSxPQUFBQSxFQUdBLElBQUFJLEVBQUFILEVBQUFJLFNBQUEsS0FBQUosRUFBQUssS0FDQUMsRUFBQUgsRUFBQUgsRUFBQU8sU0FBQUMsUUFBQSxpQkEyREEsT0EvQkFULEVBQUFTLFFBQUEsK0RBQUFDLEVBQUFDLEdBRUEsSUFXQUMsRUFYQUMsRUFBQUYsRUFDQUcsT0FDQUwsUUFBQSxvQkFBQWhHLEVBQUFzRyxHQUF3QyxPQUFBQSxJQUN4Q04sUUFBQSxvQkFBQWhHLEVBQUFzRyxHQUF3QyxPQUFBQSxJQUd4QywwREFBQUMsS0FBQUgsR0FDQUgsR0FRQUUsRUFGQSxJQUFBQyxFQUFBSSxRQUFBLE1BRUFKLEVBQ0csSUFBQUEsRUFBQUksUUFBQSxLQUVIYixFQUFBUyxFQUdBTixFQUFBTSxFQUFBSixRQUFBLFlBSUEsT0FBQVMsS0FBQUMsVUFBQVAsR0FBQSx5QkM5RUEsSUFFQVEsRUFDQUMsRUFIQUMsS0FXQUMsR0FUQUgsRUFTQSxXQU1BLE9BQUFsQixRQUFBakUsbUJBQUF1RixNQUFBdEIsT0FBQXVCLE1BWkEsV0FFQSxZQURBLElBQUFKLE1BQUFELEVBQUFNLE1BQUEvRixLQUFBZ0csWUFDQU4sSUFpQkFPLEVBQUEsU0FBQVIsR0FDQSxJQUFBQyxLQUVBLGdCQUFBUSxHQU1BLHNCQUFBQSxFQUNBLE9BQUFBLElBRUEsWUFBQVIsRUFBQVEsR0FBQSxDQUNBLElBQUFDLEVBakJBLFNBQUFELEdBQ0EsT0FBQTVGLFNBQUE4RixjQUFBRixJQWdCQTFILEtBQUF3QixLQUFBa0csR0FFQSxHQUFBM0IsT0FBQThCLG1CQUFBRixhQUFBNUIsT0FBQThCLGtCQUNBLElBR0FGLElBQUFHLGdCQUFBQyxLQUNLLE1BQUEvRixHQUNMMkYsRUFBQSxLQUdBVCxFQUFBUSxHQUFBQyxFQUVBLE9BQUFULEVBQUFRLElBMUJBLEdBOEJBTSxFQUFBLEtBQ0FDLEVBQUEsRUFDQUMsS0FFQUMsRUFBQTFJLEVBQUEsR0FxREEsU0FBQTJJLEVBQUFDLEVBQUFDLEdBQ0EsUUFBQXpJLEVBQUEsRUFBZ0JBLEVBQUF3SSxFQUFBM0UsT0FBbUI3RCxJQUFBLENBQ25DLElBQUEwSSxFQUFBRixFQUFBeEksR0FDQTJJLEVBQUFyQixFQUFBb0IsRUFBQUUsSUFFQSxHQUFBRCxFQUFBLENBQ0FBLEVBQUFFLE9BRUEsUUFBQUMsRUFBQSxFQUFpQkEsRUFBQUgsRUFBQUksTUFBQWxGLE9BQTJCaUYsSUFDNUNILEVBQUFJLE1BQUFELEdBQUFKLEVBQUFLLE1BQUFELElBR0EsS0FBUUEsRUFBQUosRUFBQUssTUFBQWxGLE9BQXVCaUYsSUFDL0JILEVBQUFJLE1BQUFuRyxLQUFBb0csRUFBQU4sRUFBQUssTUFBQUQsR0FBQUwsUUFFRyxDQUNILElBQUFNLEtBRUEsSUFBQUQsRUFBQSxFQUFpQkEsRUFBQUosRUFBQUssTUFBQWxGLE9BQXVCaUYsSUFDeENDLEVBQUFuRyxLQUFBb0csRUFBQU4sRUFBQUssTUFBQUQsR0FBQUwsSUFHQW5CLEVBQUFvQixFQUFBRSxLQUEyQkEsR0FBQUYsRUFBQUUsR0FBQUMsS0FBQSxFQUFBRSxXQUszQixTQUFBRSxFQUFBQyxFQUFBVCxHQUlBLElBSEEsSUFBQUQsS0FDQVcsS0FFQW5KLEVBQUEsRUFBZ0JBLEVBQUFrSixFQUFBckYsT0FBaUI3RCxJQUFBLENBQ2pDLElBQUEwSSxFQUFBUSxFQUFBbEosR0FDQTRJLEVBQUFILEVBQUFXLEtBQUFWLEVBQUEsR0FBQUQsRUFBQVcsS0FBQVYsRUFBQSxHQUlBVyxHQUFjckQsSUFIZDBDLEVBQUEsR0FHY1ksTUFGZFosRUFBQSxHQUVjYSxVQURkYixFQUFBLElBR0FTLEVBQUFQLEdBQ0FPLEVBQUFQLEdBQUFHLE1BQUFuRyxLQUFBeUcsR0FEQWIsRUFBQTVGLEtBQUF1RyxFQUFBUCxJQUFrREEsS0FBQUcsT0FBQU0sS0FJbEQsT0FBQWIsRUFHQSxTQUFBZ0IsRUFBQWYsRUFBQXhGLEdBQ0EsSUFBQTRFLEVBQUFELEVBQUFhLEVBQUFnQixZQUVBLElBQUE1QixFQUNBLFVBQUExQixNQUFBLCtHQUdBLElBQUF1RCxFQUFBckIsSUFBQXhFLE9BQUEsR0FFQSxXQUFBNEUsRUFBQWtCLFNBQ0FELEVBRUdBLEVBQUFFLFlBQ0gvQixFQUFBZ0MsYUFBQTVHLEVBQUF5RyxFQUFBRSxhQUVBL0IsRUFBQW5FLFlBQUFULEdBSkE0RSxFQUFBZ0MsYUFBQTVHLEVBQUE0RSxFQUFBaUMsWUFNQXpCLEVBQUF6RixLQUFBSyxRQUNFLGNBQUF3RixFQUFBa0IsU0FDRjlCLEVBQUFuRSxZQUFBVCxPQUNFLHFCQUFBd0YsRUFBQWtCLFdBQUFsQixFQUFBa0IsU0FBQUksT0FJRixVQUFBNUQsTUFBQSw4TEFIQSxJQUFBeUQsRUFBQWhDLEVBQUFhLEVBQUFnQixXQUFBLElBQUFoQixFQUFBa0IsU0FBQUksUUFDQWxDLEVBQUFnQyxhQUFBNUcsRUFBQTJHLElBTUEsU0FBQUksRUFBQS9HLEdBQ0EsVUFBQUEsRUFBQWdILFdBQUEsU0FDQWhILEVBQUFnSCxXQUFBQyxZQUFBakgsR0FFQSxJQUFBa0gsRUFBQTlCLEVBQUFwQixRQUFBaEUsR0FDQWtILEdBQUEsR0FDQTlCLEVBQUErQixPQUFBRCxFQUFBLEdBSUEsU0FBQUUsRUFBQTVCLEdBQ0EsSUFBQXhGLEVBQUFoQixTQUFBYSxjQUFBLFNBT0EsT0FMQTJGLEVBQUE2QixNQUFBQyxLQUFBLFdBRUFDLEVBQUF2SCxFQUFBd0YsRUFBQTZCLE9BQ0FkLEVBQUFmLEVBQUF4RixHQUVBQSxFQWVBLFNBQUF1SCxFQUFBQyxFQUFBSCxHQUNBNUosT0FBQWdLLEtBQUFKLEdBQUFLLFFBQUEsU0FBQUMsR0FDQUgsRUFBQUksYUFBQUQsRUFBQU4sRUFBQU0sTUFJQSxTQUFBNUIsRUFBQThCLEVBQUFyQyxHQUNBLElBQUF4RixFQUFBOEgsRUFBQUMsRUFBQUMsRUFHQSxHQUFBeEMsRUFBQXlDLFdBQUFKLEVBQUE5RSxJQUFBLENBR0EsS0FGQWlGLEVBQUF4QyxFQUFBeUMsVUFBQUosRUFBQTlFLE1BU0Esb0JBSkE4RSxFQUFBOUUsSUFBQWlGLEVBVUEsR0FBQXhDLEVBQUFOLFVBQUEsQ0FDQSxJQUFBZ0QsRUFBQS9DLElBRUFuRixFQUFBa0YsTUFBQWtDLEVBQUE1QixJQUVBc0MsRUFBQUssRUFBQUMsS0FBQSxLQUFBcEksRUFBQWtJLEdBQUEsR0FDQUgsRUFBQUksRUFBQUMsS0FBQSxLQUFBcEksRUFBQWtJLEdBQUEsUUFHQUwsRUFBQXZCLFdBQ0EsbUJBQUErQixLQUNBLG1CQUFBQSxJQUFBQyxpQkFDQSxtQkFBQUQsSUFBQUUsaUJBQ0EsbUJBQUFDLE1BQ0EsbUJBQUFDLE1BRUF6SSxFQXREQSxTQUFBd0YsR0FDQSxJQUFBa0QsRUFBQTFKLFNBQUFhLGNBQUEsUUFRQSxPQU5BMkYsRUFBQTZCLE1BQUFDLEtBQUEsV0FDQTlCLEVBQUE2QixNQUFBc0IsSUFBQSxhQUVBcEIsRUFBQW1CLEVBQUFsRCxFQUFBNkIsT0FDQWQsRUFBQWYsRUFBQWtELEdBRUFBLEVBNkNBRSxDQUFBcEQsR0FDQXNDLEVBaUZBLFNBQUFZLEVBQUFsRCxFQUFBcUMsR0FDQSxJQUFBOUUsRUFBQThFLEVBQUE5RSxJQUNBdUQsRUFBQXVCLEVBQUF2QixVQVFBdUMsT0FBQUMsSUFBQXRELEVBQUF1RCx1QkFBQXpDLEdBRUFkLEVBQUF1RCx1QkFBQUYsS0FDQTlGLEVBQUFzQyxFQUFBdEMsSUFHQXVELElBRUF2RCxHQUFBLHVEQUF1RDBGLEtBQUFPLFNBQUFDLG1CQUFBaEYsS0FBQUMsVUFBQW9DLE1BQUEsT0FHdkQsSUFBQTRDLEVBQUEsSUFBQVYsTUFBQXpGLElBQTZCdUUsS0FBQSxhQUU3QjZCLEVBQUFULEVBQUFVLEtBRUFWLEVBQUFVLEtBQUFmLElBQUFDLGdCQUFBWSxHQUVBQyxHQUFBZCxJQUFBRSxnQkFBQVksSUE1R0FmLEtBQUEsS0FBQXBJLEVBQUF3RixHQUNBdUMsRUFBQSxXQUNBaEIsRUFBQS9HLEdBRUFBLEVBQUFvSixNQUFBZixJQUFBRSxnQkFBQXZJLEVBQUFvSixTQUdBcEosRUFBQW9ILEVBQUE1QixHQUNBc0MsRUFzREEsU0FBQTlILEVBQUE2SCxHQUNBLElBQUE5RSxFQUFBOEUsRUFBQTlFLElBQ0FzRCxFQUFBd0IsRUFBQXhCLE1BRUFBLEdBQ0FyRyxFQUFBNEgsYUFBQSxRQUFBdkIsR0FHQSxHQUFBckcsRUFBQXFKLFdBQ0FySixFQUFBcUosV0FBQUMsUUFBQXZHLE1BQ0UsQ0FDRixLQUFBL0MsRUFBQTZHLFlBQ0E3RyxFQUFBaUgsWUFBQWpILEVBQUE2RyxZQUdBN0csRUFBQVMsWUFBQXpCLFNBQUF1SyxlQUFBeEcsTUFyRUFxRixLQUFBLEtBQUFwSSxHQUNBK0gsRUFBQSxXQUNBaEIsRUFBQS9HLEtBTUEsT0FGQThILEVBQUFELEdBRUEsU0FBQTJCLEdBQ0EsR0FBQUEsRUFBQSxDQUNBLEdBQ0FBLEVBQUF6RyxNQUFBOEUsRUFBQTlFLEtBQ0F5RyxFQUFBbkQsUUFBQXdCLEVBQUF4QixPQUNBbUQsRUFBQWxELFlBQUF1QixFQUFBdkIsVUFFQSxPQUdBd0IsRUFBQUQsRUFBQTJCLFFBRUF6QixLQXJPQWpMLEVBQUFELFFBQUEsU0FBQW9KLEVBQUFULEdBQ0EsdUJBQUFpRSxjQUNBLGlCQUFBekssU0FBQSxVQUFBa0UsTUFBQSxpRUFHQXNDLFNBRUE2QixNQUFBLGlCQUFBN0IsRUFBQTZCLE1BQUE3QixFQUFBNkIsU0FJQTdCLEVBQUFOLFdBQUEsa0JBQUFNLEVBQUFOLFlBQUFNLEVBQUFOLFVBQUFaLEtBR0FrQixFQUFBZ0IsYUFBQWhCLEVBQUFnQixXQUFBLFFBR0FoQixFQUFBa0IsV0FBQWxCLEVBQUFrQixTQUFBLFVBRUEsSUFBQW5CLEVBQUFTLEVBQUFDLEVBQUFULEdBSUEsT0FGQUYsRUFBQUMsRUFBQUMsR0FFQSxTQUFBa0UsR0FHQSxJQUZBLElBQUFDLEtBRUE1TSxFQUFBLEVBQWlCQSxFQUFBd0ksRUFBQTNFLE9BQW1CN0QsSUFBQSxDQUNwQyxJQUFBMEksRUFBQUYsRUFBQXhJLElBQ0EySSxFQUFBckIsRUFBQW9CLEVBQUFFLEtBRUFDLE9BQ0ErRCxFQUFBaEssS0FBQStGLEdBR0FnRSxHQUVBcEUsRUFEQVUsRUFBQTBELEVBQUFsRSxHQUNBQSxHQUdBLElBQUF6SSxFQUFBLEVBQWlCQSxFQUFBNE0sRUFBQS9JLE9BQXNCN0QsSUFBQSxDQUN2QyxJQUFBMkksRUFFQSxRQUZBQSxFQUFBaUUsRUFBQTVNLElBRUE2SSxLQUFBLENBQ0EsUUFBQUMsRUFBQSxFQUFtQkEsRUFBQUgsRUFBQUksTUFBQWxGLE9BQTJCaUYsSUFBQUgsRUFBQUksTUFBQUQsWUFFOUN4QixFQUFBcUIsRUFBQUMsUUE2TEEsSUFDQWlFLEVBREFDLEdBQ0FELEtBRUEsU0FBQUUsRUFBQUMsR0FHQSxPQUZBSCxFQUFBRSxHQUFBQyxFQUVBSCxFQUFBSSxPQUFBQyxTQUFBQyxLQUFBLFFBSUEsU0FBQS9CLEVBQUFuSSxFQUFBOEosRUFBQS9CLEVBQUFGLEdBQ0EsSUFBQTlFLEVBQUFnRixFQUFBLEdBQUFGLEVBQUE5RSxJQUVBLEdBQUEvQyxFQUFBcUosV0FDQXJKLEVBQUFxSixXQUFBQyxRQUFBTyxFQUFBQyxFQUFBL0csT0FDRSxDQUNGLElBQUFvSCxFQUFBbkwsU0FBQXVLLGVBQUF4RyxHQUNBcUgsRUFBQXBLLEVBQUFvSyxXQUVBQSxFQUFBTixJQUFBOUosRUFBQWlILFlBQUFtRCxFQUFBTixJQUVBTSxFQUFBeEosT0FDQVosRUFBQTRHLGFBQUF1RCxFQUFBQyxFQUFBTixJQUVBOUosRUFBQVMsWUFBQTBKLG9CQzlUQXJOLEVBQUFELFFBQUEsU0FBQXdOLEdBQ0EsSUFBQXBFLEtBd0NBLE9BckNBQSxFQUFBcUUsU0FBQSxXQUNBLE9BQUE1TCxLQUFBNkwsSUFBQSxTQUFBOUUsR0FDQSxJQUFBK0UsRUFzQ0EsU0FBQS9FLEVBQUE0RSxHQUNBLElBQUFHLEVBQUEvRSxFQUFBLE9BQ0FnRixFQUFBaEYsRUFBQSxHQUNBLElBQUFnRixFQUNBLE9BQUFELEVBR0EsR0FBQUgsR0FBQSxtQkFBQTVCLEtBQUEsQ0FDQSxJQUFBaUMsR0FZQXBFLEVBWkFtRSxFQWlCQSxtRUFIQWhDLEtBQUFPLFNBQUFDLG1CQUFBaEYsS0FBQUMsVUFBQW9DLE1BR0EsT0FoQkFxRSxFQUFBRixFQUFBRyxRQUFBTCxJQUFBLFNBQUFNLEdBQ0EsdUJBQUFKLEVBQUFLLFdBQUFELEVBQUEsUUFHQSxPQUFBTCxHQUFBTyxPQUFBSixHQUFBSSxRQUFBTCxJQUFBUixLQUFBLE1BT0EsSUFBQTVELEVBSkEsT0FBQWtFLEdBQUFOLEtBQUEsTUF0REFjLENBQUF2RixFQUFBNEUsR0FDQSxPQUFBNUUsRUFBQSxHQUNBLFVBQUFBLEVBQUEsT0FBbUMrRSxFQUFBLElBRW5DQSxJQUVHTixLQUFBLEtBSUhqRSxFQUFBbEosRUFBQSxTQUFBRSxFQUFBZ08sR0FDQSxpQkFBQWhPLElBQ0FBLElBQUEsS0FBQUEsRUFBQSxNQUVBLElBREEsSUFBQWlPLEtBQ0FuTyxFQUFBLEVBQWdCQSxFQUFBMkIsS0FBQWtDLE9BQWlCN0QsSUFBQSxDQUNqQyxJQUFBNEksRUFBQWpILEtBQUEzQixHQUFBLEdBQ0EsaUJBQUE0SSxJQUNBdUYsRUFBQXZGLElBQUEsR0FFQSxJQUFBNUksRUFBQSxFQUFZQSxFQUFBRSxFQUFBMkQsT0FBb0I3RCxJQUFBLENBQ2hDLElBQUEwSSxFQUFBeEksRUFBQUYsR0FLQSxpQkFBQTBJLEVBQUEsSUFBQXlGLEVBQUF6RixFQUFBLE1BQ0F3RixJQUFBeEYsRUFBQSxHQUNBQSxFQUFBLEdBQUF3RixFQUNLQSxJQUNMeEYsRUFBQSxPQUFBQSxFQUFBLGFBQUF3RixFQUFBLEtBRUFoRixFQUFBdEcsS0FBQThGLE1BSUFRLHFCQzlDQW5KLEVBQUFELFFBQUFGLEVBQUEsRUFBQUEsRUFBQSxJQUtBZ0QsTUFBQTdDLEVBQUFDLEVBQUEsdUdBQThILHNCQ0o5SCxJQUFBeU4sRUFBQTdOLEVBQUEsR0FFQSxpQkFBQTZOLFFBQUExTixFQUFBQyxFQUFBeU4sRUFBQSxNQU9BLElBQUFoRixHQUFlMkYsS0FBQSxFQUVmbEQsZUFQQUEsRUFRQXpCLGdCQUFBc0MsR0FFQW5NLEVBQUEsRUFBQUEsQ0FBQTZOLEVBQUFoRixHQUVBZ0YsRUFBQVksU0FBQXRPLEVBQUFELFFBQUEyTixFQUFBWSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IEJvYXJkIGZyb20gJy4vQm9hcmQnO1xyXG5cclxuY29uc3QgYm9hcmQgPSBuZXcgQm9hcmQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSk7IiwiaW1wb3J0ICcuL2JvYXJkLmNzcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb2FyZCB7XHJcbiAgICBjb25zdHJ1Y3RvcihodG1sRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVySHRtbCA9IGh0bWxFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuZHJhd1RhYmxlKCk7XHJcbiAgICAgICAgdGhpcy5jb2xvckRpY3Rpb25hcnkgPSB0aGlzLmdldENvbG9yRGljdGlvbmFyeSgpO1xyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgICAgIGRvY3VtZW50Lm9ua2V5ZG93biA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubW92ZShlLmtleUNvZGUpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpe1xyXG4gICAgICAgIHRoaXMuaW5pdEFycmF5KCk7XHJcbiAgICAgICAgdGhpcy53YXNTaGlmdCA9IHRydWVcclxuICAgICAgICB0aGlzLmZpbGxUYWJsZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBpbml0QXJyYXkoKSB7XHJcbiAgICAgICAgdGhpcy5hcnJheSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDQ7IHJvdysrKSB7XHJcbiAgICAgICAgICAgIGxldCByb3cgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgNDsgY29sKyspIHtcclxuICAgICAgICAgICAgICAgIHJvdy5wdXNoKDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuYXJyYXkucHVzaChyb3cpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBkcmF3VGFibGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbmVySHRtbCkge1xyXG4gICAgICAgICAgICBsZXQgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xyXG4gICAgICAgICAgICB0YWJsZS5jbGFzc0xpc3QuYWRkKCdib2FyZCcpO1xyXG4gICAgICAgICAgICB0YWJsZS5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIGJsYWNrJztcclxuICAgICAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgNDsgcm93KyspIHtcclxuICAgICAgICAgICAgICAgIGxldCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCA0OyBjb2wrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgICAgICAgICAgICAgdGQuc3R5bGUudmVydGljYWxBbGlnbiA9ICdtaWRkbGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRkLnN0eWxlLmhlaWdodCA9ICcxMDBweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGQuc3R5bGUud2lkdGggPSAnMTAwcHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRkLnN0eWxlLmZvbnRTaXplID0gJzIycHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckh0bWwuYXBwZW5kQ2hpbGQodGFibGUpO1xyXG4gICAgICAgICAgICB0aGlzLnRhYmxlID0gdGFibGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcbiAgICBmaWxsVGFibGUoKSB7XHJcbiAgICAgICAgbGV0IG9wZW4gPSB0aGlzLmdldE9wZW5Qb3NpdGlvbnMoKTtcclxuICAgICAgICBpZighb3Blbi5sZW5ndGggJiYgdGhpcy5pc0RlYWRsb2NrKCkpe1xyXG4gICAgICAgICAgICBsZXQgc2NvcmUgPSB0aGlzLmFycmF5LnJlZHVjZSgocHJldiwgY3VycmVudCkgPT4ge2xldCBtYXggPSBjdXJyZW50LnJlZHVjZSgoaW5wcmV2LCBpbmN1cnJlbnQpID0+IGlucHJldiA8IGluY3VycmVudCA/IGluY3VycmVudCA6IGlucHJldiwgMCk7IHJldHVybiBtYXggPiBwcmV2ID8gbWF4IDogcHJldn0sIDApXHJcbiAgICAgICAgICAgIGFsZXJ0KCdZb3VyIHNjb3JlIGlzICcgKyBzY29yZSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBpZih0aGlzLndhc1NoaWZ0KXtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVOdW1iZXIob3Blbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgNDsgcm93KyspIHtcclxuICAgICAgICAgICAgICAgIGxldCB0ciA9IHRoaXMudGFibGUucXVlcnlTZWxlY3RvckFsbCgndHInKVtyb3ddO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgNDsgY29sKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGQgPSB0ci5xdWVyeVNlbGVjdG9yQWxsKCd0ZCcpW2NvbF07XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5hcnJheVtyb3ddW2NvbF07XHJcbiAgICAgICAgICAgICAgICAgICAgdGQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdmFsdWUgIT0gMCA/IHRoaXMuY29sb3JEaWN0aW9uYXJ5W01hdGgubG9nMih2YWx1ZSkgLSAxXSA6IFwicmdiKDI1NSwgMjU1LCAyNTUpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGQuaW5uZXJUZXh0ID0gdmFsdWUgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgbW92ZShkaXJlY3Rpb24pIHtcclxuICAgICAgICBpZihbMzcsIDM4LCAzOSwgNDBdLmluY2x1ZGVzKGRpcmVjdGlvbikpe1xyXG4gICAgICAgICAgICB0aGlzLndhc1NoaWZ0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMzc6XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCA0OyByb3crKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhcnIgPSB0aGlzLmFycmF5W3Jvd107XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcnJheVtyb3ddID0gdGhpcy5zaGlmdCh0aGlzLnN1bShhcnIsICdMJyksICdMJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGxUYWJsZSgpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgY29sID0gMDsgY29sIDwgNDsgY29sKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhcnIgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHJvdyA9IDA7IHJvdyA8IDQ7IHJvdysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2godGhpcy5hcnJheVtyb3ddW2NvbF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhcnIgPSB0aGlzLnNoaWZ0KHRoaXMuc3VtKGFyciwgJ0wnKSwgJ0wnKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHJvdyA9IDA7IHJvdyA8IDQ7IHJvdysrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcnJheVtyb3ddW2NvbF0gPSBhcnJbcm93XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGxUYWJsZSgpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAzOTpcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDQ7IHJvdysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFyciA9IHRoaXMuYXJyYXlbcm93XTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFycmF5W3Jvd10gPSB0aGlzLnNoaWZ0KHRoaXMuc3VtKGFyciwgJ1InKSwgJ1InKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsbFRhYmxlKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDQwOlxyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBjb2wgPSAwOyBjb2wgPCA0OyBjb2wrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFyciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcm93ID0gMDsgcm93IDwgNDsgcm93Kyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCh0aGlzLmFycmF5W3Jvd11bY29sXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGFyciA9IHRoaXMuc2hpZnQodGhpcy5zdW0oYXJyLCAnUicpLCAnUicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgcm93ID0gMDsgcm93IDwgNDsgcm93Kyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFycmF5W3Jvd11bY29sXSA9IGFycltyb3ddO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsbFRhYmxlKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBzdW0oYXJyLCBkaXIpIHtcclxuICAgICAgICBzd2l0Y2goZGlyKXtcclxuICAgICAgICAgICAgY2FzZSAnTCc6XHJcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gMDtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChjb2wgPCA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFycltjb2xdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gY29sKzE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlKG5leHQgPCA0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFycltuZXh0XSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYXJyW2NvbF0gPT0gYXJyW25leHRdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyW2NvbF0gKj0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyW25leHRdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29sKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdSJzpcclxuICAgICAgICAgICAgICAgIHZhciBjb2wgPSAzO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGNvbCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJyW2NvbF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5leHQgPSBjb2wtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUobmV4dCA+PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFycltuZXh0XSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYXJyW2NvbF0gPT0gYXJyW25leHRdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyW2NvbF0gKj0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyW25leHRdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0LS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29sLS07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gYXJyO1xyXG4gICAgfTtcclxuICAgIHNoaWZ0KGFyciwgZGlyKXtcclxuICAgICAgICBzd2l0Y2goZGlyKXtcclxuICAgICAgICAgICAgY2FzZSAnUic6XHJcbiAgICAgICAgICAgICAgICBhcnIgPSBhcnIuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFiICYmIGEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhc1NoaWZ0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFiICYmIGEgPyAxIDogMDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnTCc6XHJcbiAgICAgICAgICAgICAgICBhcnIgPSBhcnIuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFhICYmIGIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhc1NoaWZ0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFhICYmIGIgPyAxIDogMDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFycjtcclxuICAgIH07XHJcbiAgICBnZW5lcmF0ZU51bWJlcihwb3NpdGlvbnMpeyAgICAgICBcclxuICAgICAgICBpZihwb3NpdGlvbnMubGVuZ3RoKXtcclxuICAgICAgICAgICAgbGV0IG51bWJlciA9IE1hdGgucmFuZG9tKCkgPiAwLjUgPyAyIDogNDtcclxuICAgICAgICAgICAgbGV0IHBvc2l0aW9uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcG9zaXRpb25zLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGxldCByb3cgPSBwb3NpdGlvbnNbcG9zaXRpb25dWzBdO1xyXG4gICAgICAgICAgICBsZXQgY29sID0gcG9zaXRpb25zW3Bvc2l0aW9uXVsxXTtcclxuICAgICAgICAgICAgdGhpcy5hcnJheVtyb3ddW2NvbF0gPSBudW1iZXI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGdldE9wZW5Qb3NpdGlvbnMoKXtcclxuICAgICAgICBsZXQgcG9zaXRpb25zID0gW107XHJcbiAgICAgICAgZm9yKGxldCByb3cgPSAwOyByb3cgPCA0OyByb3crKyl7XHJcbiAgICAgICAgICAgIGZvcihsZXQgY29sID0gMDsgY29sIDwgNDsgY29sKyspe1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuYXJyYXlbcm93XVtjb2xdKXtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbnMucHVzaChbcm93LCBjb2xdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcG9zaXRpb25zO1xyXG4gICAgfTtcclxuICAgIGlzRGVhZGxvY2soKXtcclxuICAgICAgICBmb3IobGV0IHJvdyA9IDA7IHJvdyA8IDQ7IHJvdysrKXtcclxuICAgICAgICAgICAgZm9yKGxldCBjb2wgPSAwOyBjb2wgPCA0OyBjb2wrKyl7XHJcbiAgICAgICAgICAgICAgICBpZihjb2wgIT0gMyAmJiB0aGlzLmFycmF5W3Jvd11bY29sXSA9PT0gdGhpcy5hcnJheVtyb3ddW2NvbCsxXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYocm93ICE9IDMgJiYgdGhpcy5hcnJheVtyb3ddW2NvbF0gPT0gdGhpcy5hcnJheVtyb3crMV1bY29sXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIGdldENvbG9yRGljdGlvbmFyeSgpe1xyXG4gICAgICAgIGxldCByID0gMTA1OyBsZXQgc3RlcCA9IDIwO1xyXG4gICAgICAgIGNvbnN0IGRpZmYgPSAyNTUgLSByO1xyXG4gICAgICAgIGxldCBkaWN0aW9uYXJ5ID0gW107XHJcbiAgICAgICAgZm9yKGxldCBuID0gMDsgbiA8IDMwOyBuKyspe1xyXG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBuICogc3RlcDtcclxuICAgICAgICAgICAgaWYodmFsdWUgPiBkaWZmICogMyl7XHJcbiAgICAgICAgICAgICAgICBkaWN0aW9uYXJ5LnB1c2goJ3JnYigyNTUsIDI1NSwgMjU1KScpO1xyXG4gICAgICAgICAgICB9ZWxzZSBpZih2YWx1ZSA8PSBkaWZmKXtcclxuICAgICAgICAgICAgICAgIGxldCBjb2xvciA9IGByZ2IoJHtyK3ZhbHVlfSwgJHtyfSwgJHtyfSlgO1xyXG4gICAgICAgICAgICAgICAgZGljdGlvbmFyeS5wdXNoKGNvbG9yKTtcclxuICAgICAgICAgICAgfWVsc2UgaWYodmFsdWUgPiBkaWZmICYmIHZhbHVlIDw9IGRpZmYgKiAyKXtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgLSBkaWZmO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbG9yID0gYHJnYigke3J9LCAke3IrdmFsdWV9LCAke3J9KWA7XHJcbiAgICAgICAgICAgICAgICBkaWN0aW9uYXJ5LnB1c2goY29sb3IpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgLSAyICogZGlmZjtcclxuICAgICAgICAgICAgICAgIGxldCBjb2xvciA9IGByZ2IoJHtyfSwgJHtyfSwgJHtyK3ZhbHVlfSlgO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkaWN0aW9uYXJ5O1xyXG4gICAgfTtcclxufSIsIlxuLyoqXG4gKiBXaGVuIHNvdXJjZSBtYXBzIGFyZSBlbmFibGVkLCBgc3R5bGUtbG9hZGVyYCB1c2VzIGEgbGluayBlbGVtZW50IHdpdGggYSBkYXRhLXVyaSB0b1xuICogZW1iZWQgdGhlIGNzcyBvbiB0aGUgcGFnZS4gVGhpcyBicmVha3MgYWxsIHJlbGF0aXZlIHVybHMgYmVjYXVzZSBub3cgdGhleSBhcmUgcmVsYXRpdmUgdG8gYVxuICogYnVuZGxlIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgcGFnZS5cbiAqXG4gKiBPbmUgc29sdXRpb24gaXMgdG8gb25seSB1c2UgZnVsbCB1cmxzLCBidXQgdGhhdCBtYXkgYmUgaW1wb3NzaWJsZS5cbiAqXG4gKiBJbnN0ZWFkLCB0aGlzIGZ1bmN0aW9uIFwiZml4ZXNcIiB0aGUgcmVsYXRpdmUgdXJscyB0byBiZSBhYnNvbHV0ZSBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgcGFnZSBsb2NhdGlvbi5cbiAqXG4gKiBBIHJ1ZGltZW50YXJ5IHRlc3Qgc3VpdGUgaXMgbG9jYXRlZCBhdCBgdGVzdC9maXhVcmxzLmpzYCBhbmQgY2FuIGJlIHJ1biB2aWEgdGhlIGBucG0gdGVzdGAgY29tbWFuZC5cbiAqXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzKSB7XG4gIC8vIGdldCBjdXJyZW50IGxvY2F0aW9uXG4gIHZhciBsb2NhdGlvbiA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmxvY2F0aW9uO1xuXG4gIGlmICghbG9jYXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJmaXhVcmxzIHJlcXVpcmVzIHdpbmRvdy5sb2NhdGlvblwiKTtcbiAgfVxuXG5cdC8vIGJsYW5rIG9yIG51bGw/XG5cdGlmICghY3NzIHx8IHR5cGVvZiBjc3MgIT09IFwic3RyaW5nXCIpIHtcblx0ICByZXR1cm4gY3NzO1xuICB9XG5cbiAgdmFyIGJhc2VVcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIGxvY2F0aW9uLmhvc3Q7XG4gIHZhciBjdXJyZW50RGlyID0gYmFzZVVybCArIGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1xcL1teXFwvXSokLywgXCIvXCIpO1xuXG5cdC8vIGNvbnZlcnQgZWFjaCB1cmwoLi4uKVxuXHQvKlxuXHRUaGlzIHJlZ3VsYXIgZXhwcmVzc2lvbiBpcyBqdXN0IGEgd2F5IHRvIHJlY3Vyc2l2ZWx5IG1hdGNoIGJyYWNrZXRzIHdpdGhpblxuXHRhIHN0cmluZy5cblxuXHQgL3VybFxccypcXCggID0gTWF0Y2ggb24gdGhlIHdvcmQgXCJ1cmxcIiB3aXRoIGFueSB3aGl0ZXNwYWNlIGFmdGVyIGl0IGFuZCB0aGVuIGEgcGFyZW5zXG5cdCAgICggID0gU3RhcnQgYSBjYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAoPzogID0gU3RhcnQgYSBub24tY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgICAgIFteKShdICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAoPzogID0gU3RhcnQgYW5vdGhlciBub24tY2FwdHVyaW5nIGdyb3Vwc1xuXHQgICAgICAgICAgICAgICAgIFteKShdKyAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICAgICAgW14pKF0qICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIFxcKSAgPSBNYXRjaCBhIGVuZCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKSAgPSBFbmQgR3JvdXBcbiAgICAgICAgICAgICAgKlxcKSA9IE1hdGNoIGFueXRoaW5nIGFuZCB0aGVuIGEgY2xvc2UgcGFyZW5zXG4gICAgICAgICAgKSAgPSBDbG9zZSBub24tY2FwdHVyaW5nIGdyb3VwXG4gICAgICAgICAgKiAgPSBNYXRjaCBhbnl0aGluZ1xuICAgICAgICkgID0gQ2xvc2UgY2FwdHVyaW5nIGdyb3VwXG5cdCBcXCkgID0gTWF0Y2ggYSBjbG9zZSBwYXJlbnNcblxuXHQgL2dpICA9IEdldCBhbGwgbWF0Y2hlcywgbm90IHRoZSBmaXJzdC4gIEJlIGNhc2UgaW5zZW5zaXRpdmUuXG5cdCAqL1xuXHR2YXIgZml4ZWRDc3MgPSBjc3MucmVwbGFjZSgvdXJsXFxzKlxcKCgoPzpbXikoXXxcXCgoPzpbXikoXSt8XFwoW14pKF0qXFwpKSpcXCkpKilcXCkvZ2ksIGZ1bmN0aW9uKGZ1bGxNYXRjaCwgb3JpZ1VybCkge1xuXHRcdC8vIHN0cmlwIHF1b3RlcyAoaWYgdGhleSBleGlzdClcblx0XHR2YXIgdW5xdW90ZWRPcmlnVXJsID0gb3JpZ1VybFxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL15cIiguKilcIiQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSlcblx0XHRcdC5yZXBsYWNlKC9eJyguKiknJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KTtcblxuXHRcdC8vIGFscmVhZHkgYSBmdWxsIHVybD8gbm8gY2hhbmdlXG5cdFx0aWYgKC9eKCN8ZGF0YTp8aHR0cDpcXC9cXC98aHR0cHM6XFwvXFwvfGZpbGU6XFwvXFwvXFwvfFxccyokKS9pLnRlc3QodW5xdW90ZWRPcmlnVXJsKSkge1xuXHRcdCAgcmV0dXJuIGZ1bGxNYXRjaDtcblx0XHR9XG5cblx0XHQvLyBjb252ZXJ0IHRoZSB1cmwgdG8gYSBmdWxsIHVybFxuXHRcdHZhciBuZXdVcmw7XG5cblx0XHRpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvL1wiKSA9PT0gMCkge1xuXHRcdCAgXHQvL1RPRE86IHNob3VsZCB3ZSBhZGQgcHJvdG9jb2w/XG5cdFx0XHRuZXdVcmwgPSB1bnF1b3RlZE9yaWdVcmw7XG5cdFx0fSBlbHNlIGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi9cIikgPT09IDApIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBiYXNlIHVybFxuXHRcdFx0bmV3VXJsID0gYmFzZVVybCArIHVucXVvdGVkT3JpZ1VybDsgLy8gYWxyZWFkeSBzdGFydHMgd2l0aCAnLydcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gY3VycmVudCBkaXJlY3Rvcnlcblx0XHRcdG5ld1VybCA9IGN1cnJlbnREaXIgKyB1bnF1b3RlZE9yaWdVcmwucmVwbGFjZSgvXlxcLlxcLy8sIFwiXCIpOyAvLyBTdHJpcCBsZWFkaW5nICcuLydcblx0XHR9XG5cblx0XHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIHVybCguLi4pXG5cdFx0cmV0dXJuIFwidXJsKFwiICsgSlNPTi5zdHJpbmdpZnkobmV3VXJsKSArIFwiKVwiO1xuXHR9KTtcblxuXHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIGNzc1xuXHRyZXR1cm4gZml4ZWRDc3M7XG59O1xuIiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cblxudmFyIHN0eWxlc0luRG9tID0ge307XG5cbnZhclx0bWVtb2l6ZSA9IGZ1bmN0aW9uIChmbikge1xuXHR2YXIgbWVtbztcblxuXHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0cmV0dXJuIG1lbW87XG5cdH07XG59O1xuXG52YXIgaXNPbGRJRSA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xuXHQvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuXHQvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG5cdC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcblx0Ly8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG5cdC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuXHRyZXR1cm4gd2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2I7XG59KTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTtcbn07XG5cbnZhciBnZXRFbGVtZW50ID0gKGZ1bmN0aW9uIChmbikge1xuXHR2YXIgbWVtbyA9IHt9O1xuXG5cdHJldHVybiBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBwYXNzaW5nIGZ1bmN0aW9uIGluIG9wdGlvbnMsIHRoZW4gdXNlIGl0IGZvciByZXNvbHZlIFwiaGVhZFwiIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgLy8gVXNlZnVsIGZvciBTaGFkb3cgUm9vdCBzdHlsZSBpLmVcbiAgICAgICAgICAgICAgICAvLyB7XG4gICAgICAgICAgICAgICAgLy8gICBpbnNlcnRJbnRvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvb1wiKS5zaGFkb3dSb290IH1cbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdHZhciBzdHlsZVRhcmdldCA9IGdldFRhcmdldC5jYWxsKHRoaXMsIHRhcmdldCk7XG5cdFx0XHQvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXHRcdFx0aWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG5cdFx0XHRcdFx0Ly8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcblx0XHRcdFx0XHRzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuXHRcdFx0XHR9IGNhdGNoKGUpIHtcblx0XHRcdFx0XHRzdHlsZVRhcmdldCA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuXHRcdH1cblx0XHRyZXR1cm4gbWVtb1t0YXJnZXRdXG5cdH07XG59KSgpO1xuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhclx0c2luZ2xldG9uQ291bnRlciA9IDA7XG52YXJcdHN0eWxlc0luc2VydGVkQXRUb3AgPSBbXTtcblxudmFyXHRmaXhVcmxzID0gcmVxdWlyZShcIi4vdXJsc1wiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XG5cdGlmICh0eXBlb2YgREVCVUcgIT09IFwidW5kZWZpbmVkXCIgJiYgREVCVUcpIHtcblx0XHRpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XG5cdH1cblxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuXHRvcHRpb25zLmF0dHJzID0gdHlwZW9mIG9wdGlvbnMuYXR0cnMgPT09IFwib2JqZWN0XCIgPyBvcHRpb25zLmF0dHJzIDoge307XG5cblx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG5cdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2Vcblx0aWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09IFwiYm9vbGVhblwiKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSA8aGVhZD4gZWxlbWVudFxuICAgICAgICBpZiAoIW9wdGlvbnMuaW5zZXJ0SW50bykgb3B0aW9ucy5pbnNlcnRJbnRvID0gXCJoZWFkXCI7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgYm90dG9tIG9mIHRoZSB0YXJnZXRcblx0aWYgKCFvcHRpb25zLmluc2VydEF0KSBvcHRpb25zLmluc2VydEF0ID0gXCJib3R0b21cIjtcblxuXHR2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QsIG9wdGlvbnMpO1xuXG5cdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZSAobmV3TGlzdCkge1xuXHRcdHZhciBtYXlSZW1vdmUgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG5cdFx0XHRkb21TdHlsZS5yZWZzLS07XG5cdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG5cdFx0fVxuXG5cdFx0aWYobmV3TGlzdCkge1xuXHRcdFx0dmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0LCBvcHRpb25zKTtcblx0XHRcdGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG5cdFx0fVxuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXTtcblxuXHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSBkb21TdHlsZS5wYXJ0c1tqXSgpO1xuXG5cdFx0XHRcdGRlbGV0ZSBzdHlsZXNJbkRvbVtkb21TdHlsZS5pZF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufTtcblxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20gKHN0eWxlcywgb3B0aW9ucykge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG5cdFx0aWYoZG9tU3R5bGUpIHtcblx0XHRcdGRvbVN0eWxlLnJlZnMrKztcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIHBhcnRzID0gW107XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXG5cdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzIChsaXN0LCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZXMgPSBbXTtcblx0dmFyIG5ld1N0eWxlcyA9IHt9O1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gbGlzdFtpXTtcblx0XHR2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcblx0XHR2YXIgY3NzID0gaXRlbVsxXTtcblx0XHR2YXIgbWVkaWEgPSBpdGVtWzJdO1xuXHRcdHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xuXHRcdHZhciBwYXJ0ID0ge2NzczogY3NzLCBtZWRpYTogbWVkaWEsIHNvdXJjZU1hcDogc291cmNlTWFwfTtcblxuXHRcdGlmKCFuZXdTdHlsZXNbaWRdKSBzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge2lkOiBpZCwgcGFydHM6IFtwYXJ0XX0pO1xuXHRcdGVsc2UgbmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuXHR9XG5cblx0cmV0dXJuIHN0eWxlcztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50IChvcHRpb25zLCBzdHlsZSkge1xuXHR2YXIgdGFyZ2V0ID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8pXG5cblx0aWYgKCF0YXJnZXQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydEludG8nIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcblx0fVxuXG5cdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlc0luc2VydGVkQXRUb3Bbc3R5bGVzSW5zZXJ0ZWRBdFRvcC5sZW5ndGggLSAxXTtcblxuXHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xuXHRcdGlmICghbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIHRhcmdldC5maXJzdENoaWxkKTtcblx0XHR9IGVsc2UgaWYgKGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdFx0fVxuXHRcdHN0eWxlc0luc2VydGVkQXRUb3AucHVzaChzdHlsZSk7XG5cdH0gZWxzZSBpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJib3R0b21cIikge1xuXHRcdHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwib2JqZWN0XCIgJiYgb3B0aW9ucy5pbnNlcnRBdC5iZWZvcmUpIHtcblx0XHR2YXIgbmV4dFNpYmxpbmcgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0SW50byArIFwiIFwiICsgb3B0aW9ucy5pbnNlcnRBdC5iZWZvcmUpO1xuXHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIG5leHRTaWJsaW5nKTtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJbU3R5bGUgTG9hZGVyXVxcblxcbiBJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0JyAoJ29wdGlvbnMuaW5zZXJ0QXQnKSBmb3VuZC5cXG4gTXVzdCBiZSAndG9wJywgJ2JvdHRvbScsIG9yIE9iamVjdC5cXG4gKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyI2luc2VydGF0KVxcblwiKTtcblx0fVxufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQgKHN0eWxlKSB7XG5cdGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xuXG5cdHZhciBpZHggPSBzdHlsZXNJbnNlcnRlZEF0VG9wLmluZGV4T2Yoc3R5bGUpO1xuXHRpZihpZHggPj0gMCkge1xuXHRcdHN0eWxlc0luc2VydGVkQXRUb3Auc3BsaWNlKGlkeCwgMSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlU3R5bGVFbGVtZW50IChvcHRpb25zKSB7XG5cdHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblxuXHRvcHRpb25zLmF0dHJzLnR5cGUgPSBcInRleHQvY3NzXCI7XG5cblx0YWRkQXR0cnMoc3R5bGUsIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGUpO1xuXG5cdHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTGlua0VsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcblxuXHRvcHRpb25zLmF0dHJzLnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdG9wdGlvbnMuYXR0cnMucmVsID0gXCJzdHlsZXNoZWV0XCI7XG5cblx0YWRkQXR0cnMobGluaywgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBsaW5rKTtcblxuXHRyZXR1cm4gbGluaztcbn1cblxuZnVuY3Rpb24gYWRkQXR0cnMgKGVsLCBhdHRycykge1xuXHRPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0ZWwuc2V0QXR0cmlidXRlKGtleSwgYXR0cnNba2V5XSk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBhZGRTdHlsZSAob2JqLCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZSwgdXBkYXRlLCByZW1vdmUsIHJlc3VsdDtcblxuXHQvLyBJZiBhIHRyYW5zZm9ybSBmdW5jdGlvbiB3YXMgZGVmaW5lZCwgcnVuIGl0IG9uIHRoZSBjc3Ncblx0aWYgKG9wdGlvbnMudHJhbnNmb3JtICYmIG9iai5jc3MpIHtcblx0ICAgIHJlc3VsdCA9IG9wdGlvbnMudHJhbnNmb3JtKG9iai5jc3MpO1xuXG5cdCAgICBpZiAocmVzdWx0KSB7XG5cdCAgICBcdC8vIElmIHRyYW5zZm9ybSByZXR1cm5zIGEgdmFsdWUsIHVzZSB0aGF0IGluc3RlYWQgb2YgdGhlIG9yaWdpbmFsIGNzcy5cblx0ICAgIFx0Ly8gVGhpcyBhbGxvd3MgcnVubmluZyBydW50aW1lIHRyYW5zZm9ybWF0aW9ucyBvbiB0aGUgY3NzLlxuXHQgICAgXHRvYmouY3NzID0gcmVzdWx0O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgIFx0Ly8gSWYgdGhlIHRyYW5zZm9ybSBmdW5jdGlvbiByZXR1cm5zIGEgZmFsc3kgdmFsdWUsIGRvbid0IGFkZCB0aGlzIGNzcy5cblx0ICAgIFx0Ly8gVGhpcyBhbGxvd3MgY29uZGl0aW9uYWwgbG9hZGluZyBvZiBjc3Ncblx0ICAgIFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdC8vIG5vb3Bcblx0ICAgIFx0fTtcblx0ICAgIH1cblx0fVxuXG5cdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuXHRcdHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuXG5cdFx0c3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSk7XG5cblx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcblx0XHRyZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuXG5cdH0gZWxzZSBpZiAoXG5cdFx0b2JqLnNvdXJjZU1hcCAmJlxuXHRcdHR5cGVvZiBVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIEJsb2IgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCJcblx0KSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSB1cGRhdGVMaW5rLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG5cblx0XHRcdGlmKHN0eWxlLmhyZWYpIFVSTC5yZXZva2VPYmplY3RVUkwoc3R5bGUuaHJlZik7XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHRzdHlsZSA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG5cdFx0fTtcblx0fVxuXG5cdHVwZGF0ZShvYmopO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZSAobmV3T2JqKSB7XG5cdFx0aWYgKG5ld09iaikge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRuZXdPYmouY3NzID09PSBvYmouY3NzICYmXG5cdFx0XHRcdG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmXG5cdFx0XHRcdG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXBcblx0XHRcdCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHVwZGF0ZShvYmogPSBuZXdPYmopO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZW1vdmUoKTtcblx0XHR9XG5cdH07XG59XG5cbnZhciByZXBsYWNlVGV4dCA9IChmdW5jdGlvbiAoKSB7XG5cdHZhciB0ZXh0U3RvcmUgPSBbXTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gKGluZGV4LCByZXBsYWNlbWVudCkge1xuXHRcdHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcblxuXHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuXHR9O1xufSkoKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyAoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuXHR2YXIgY3NzID0gcmVtb3ZlID8gXCJcIiA6IG9iai5jc3M7XG5cblx0aWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcblx0fSBlbHNlIHtcblx0XHR2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG5cdFx0dmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG5cblx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnIChzdHlsZSwgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG5cblx0aWYobWVkaWEpIHtcblx0XHRzdHlsZS5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSlcblx0fVxuXG5cdGlmKHN0eWxlLnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG5cdH0gZWxzZSB7XG5cdFx0d2hpbGUoc3R5bGUuZmlyc3RDaGlsZCkge1xuXHRcdFx0c3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG5cdFx0fVxuXG5cdFx0c3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlTGluayAobGluaywgb3B0aW9ucywgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuXHQvKlxuXHRcdElmIGNvbnZlcnRUb0Fic29sdXRlVXJscyBpc24ndCBkZWZpbmVkLCBidXQgc291cmNlbWFwcyBhcmUgZW5hYmxlZFxuXHRcdGFuZCB0aGVyZSBpcyBubyBwdWJsaWNQYXRoIGRlZmluZWQgdGhlbiBsZXRzIHR1cm4gY29udmVydFRvQWJzb2x1dGVVcmxzXG5cdFx0b24gYnkgZGVmYXVsdC4gIE90aGVyd2lzZSBkZWZhdWx0IHRvIHRoZSBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgb3B0aW9uXG5cdFx0ZGlyZWN0bHlcblx0Ki9cblx0dmFyIGF1dG9GaXhVcmxzID0gb3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgPT09IHVuZGVmaW5lZCAmJiBzb3VyY2VNYXA7XG5cblx0aWYgKG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzIHx8IGF1dG9GaXhVcmxzKSB7XG5cdFx0Y3NzID0gZml4VXJscyhjc3MpO1xuXHR9XG5cblx0aWYgKHNvdXJjZU1hcCkge1xuXHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XG5cdFx0Y3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIiArIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSkgKyBcIiAqL1wiO1xuXHR9XG5cblx0dmFyIGJsb2IgPSBuZXcgQmxvYihbY3NzXSwgeyB0eXBlOiBcInRleHQvY3NzXCIgfSk7XG5cblx0dmFyIG9sZFNyYyA9IGxpbmsuaHJlZjtcblxuXHRsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXG5cdGlmKG9sZFNyYykgVVJMLnJldm9rZU9iamVjdFVSTChvbGRTcmMpO1xufVxuIiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHVzZVNvdXJjZU1hcCkge1xuXHR2YXIgbGlzdCA9IFtdO1xuXG5cdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblx0bGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuXHRcdHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHRcdFx0dmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCk7XG5cdFx0XHRpZihpdGVtWzJdKSB7XG5cdFx0XHRcdHJldHVybiBcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGNvbnRlbnQgKyBcIn1cIjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBjb250ZW50O1xuXHRcdFx0fVxuXHRcdH0pLmpvaW4oXCJcIik7XG5cdH07XG5cblx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3Rcblx0bGlzdC5pID0gZnVuY3Rpb24obW9kdWxlcywgbWVkaWFRdWVyeSkge1xuXHRcdGlmKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKVxuXHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xuXHRcdHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XG5cdFx0XHRpZih0eXBlb2YgaWQgPT09IFwibnVtYmVyXCIpXG5cdFx0XHRcdGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcblx0XHR9XG5cdFx0Zm9yKGkgPSAwOyBpIDwgbW9kdWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBtb2R1bGVzW2ldO1xuXHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxuXHRcdFx0Ly8gdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBub3QgMTAwJSBwZXJmZWN0IGZvciB3ZWlyZCBtZWRpYSBxdWVyeSBjb21iaW5hdGlvbnNcblx0XHRcdC8vICB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuXG5cdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxuXHRcdFx0aWYodHlwZW9mIGl0ZW1bMF0gIT09IFwibnVtYmVyXCIgfHwgIWFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcblx0XHRcdFx0aWYobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSkge1xuXHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuXHRcdFx0XHR9IGVsc2UgaWYobWVkaWFRdWVyeSkge1xuXHRcdFx0XHRcdGl0ZW1bMl0gPSBcIihcIiArIGl0ZW1bMl0gKyBcIikgYW5kIChcIiArIG1lZGlhUXVlcnkgKyBcIilcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRsaXN0LnB1c2goaXRlbSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRyZXR1cm4gbGlzdDtcbn07XG5cbmZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKSB7XG5cdHZhciBjb250ZW50ID0gaXRlbVsxXSB8fCAnJztcblx0dmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuXHRpZiAoIWNzc01hcHBpbmcpIHtcblx0XHRyZXR1cm4gY29udGVudDtcblx0fVxuXG5cdGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcblx0XHR2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcblx0XHR2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuXHRcdFx0cmV0dXJuICcvKiMgc291cmNlVVJMPScgKyBjc3NNYXBwaW5nLnNvdXJjZVJvb3QgKyBzb3VyY2UgKyAnICovJ1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG5cdH1cblxuXHRyZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufVxuXG4vLyBBZGFwdGVkIGZyb20gY29udmVydC1zb3VyY2UtbWFwIChNSVQpXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuXHR2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcblx0dmFyIGRhdGEgPSAnc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsJyArIGJhc2U2NDtcblxuXHRyZXR1cm4gJy8qIyAnICsgZGF0YSArICcgKi8nO1xufVxuIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKShmYWxzZSk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYm9hcmQgdHIgdGR7XFxyXFxuICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xcclxcbn1cXHJcXG4uYm9hcmR7XFxyXFxuICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XFxyXFxufVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcbiIsIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL2JvYXJkLmNzc1wiKTtcblxuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cbnZhciB0cmFuc2Zvcm07XG52YXIgaW5zZXJ0SW50bztcblxuXG5cbnZhciBvcHRpb25zID0ge1wiaG1yXCI6dHJ1ZX1cblxub3B0aW9ucy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbm9wdGlvbnMuaW5zZXJ0SW50byA9IHVuZGVmaW5lZDtcblxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscztcblxuaWYobW9kdWxlLmhvdCkge1xuXHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9ib2FyZC5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL2JvYXJkLmNzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSJdLCJzb3VyY2VSb290IjoiIn0=